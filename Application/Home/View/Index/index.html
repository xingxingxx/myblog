<extend name="Common/base"/>
<block name="body">
    <!--网站主体-->
    <div class="container main clearfix">
        <aside class="complementary visible-lg-block">
            <div class="panel panel-default">
                <!-- Default panel contents -->
                <div class="panel-heading">
                    <h4>最热文章</h4>
                </div>
                <!-- List group -->
                <ul class="list-group">
                    <li class="list-group-item"><span class="badge">2032</span>风先生：o2o浪潮下，给小餐馆</li>
                    <li class="list-group-item"><span class="badge">1242</span>Vestibulum at eros</li>
                    <li class="list-group-item"><span class="badge">1242</span>风先生：o2o浪潮下，给小餐馆</li>
                    <li class="list-group-item"><span class="badge">1242</span>Porta ac consectetur ac</li>
                    <li class="list-group-item"><span class="badge">1242</span>风先生：o2o浪潮下，给小餐馆</li>
                </ul>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4>文章排行</h4>
                </div>
                <!-- List group -->
                <ul class="list-group">
                    <li class="list-group-item"><span class="badge">2032</span>Cras justo odio</li>
                    <li class="list-group-item"><span class="badge">1242</span>Dapibus ac facilisis in</li>
                    <li class="list-group-item"><span class="badge">912</span>Morbi leo risus</li>
                    <li class="list-group-item"><span class="badge">145</span>Porta ac consectetur ac</li>
                    <li class="list-group-item"><span class="badge">123</span>Vestibulum at eros</li>
                </ul>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4>关注我</h4>
                </div>
                <div class="panel-body">

                </div>
            </div>
        </aside>
        <!--右侧文章列表-->
        <div class="panel panel-default content">
            <div class="panel-body">
                <ul class="media-list">
                    <notempty name="topicList">
                        <volist name="topicList" id="vo">
                            <li class="media">
                                <a class="pull-left hidden-xs" href="#">
                                    <img src="__IMG__/news006.jpg" alt="..." class="media-img">
                                </a>
                                <div class="media-body">
                                    <h4 class="media-heading">
                                        <strong>{$vo.title}</strong>
                                        <small class="pull-right">
                                            <span class="glyphicon glyphicon-time"></span>
                                            {$vo.create_time}
                                        </small>
                                    </h4>
                                    <p class="font-media">
                                        {$vo.content}
                                    </p>
                                    <p class="tags">
                                        <span class="glyphicon glyphicon-tags"></span>&nbsp;&nbsp;&nbsp;&nbsp;产品经理，项目管控
                                    </p>
                                </div>
                                <hr>
                            </li>
                        </volist>
                        <else/>
                        <li class="text-center"> aOh! 暂时还没有内容!</li>
                    </notempty>
                </ul>
            </div>
        </div>
    </div>
</block>
<block name="script">
    <script>
        var MyValidator = function() {
            var handleSubmit = function() {
                $('.form-register').validate({
                    errorElement : 'span',
                    errorClass : 'help-block',
                    focusInvalid : false,
                    rules : {
                        username : {
                            required : true,
                            rangelength : [2,18],
                            remote : '{:U('User/check_name')}' //ajax验证用户名是否已存在
                        },
                        password : {
                            required : true,
                            rangelength : [6,18]
                        },
                        email : {
                            required : true,
                            email : true,
                            remote : '{:U('User/check_email')}' //ajax验证邮箱是否已被使用
                        }
                    },
                    messages : {
                        username : {
                            required : "用户名不能为空！",
                            rangelength : "用户名必须为2~18个字符！",
                            remote : "用户名已被注册！"
                        },
                        password : {
                            required : "密码不能为空！",
                            rangelength : "密码必须为6-8为的字母或数字！"
                        },
                        email : {
                            required : "邮箱不能为空！",
                            email : "邮箱格式不正确！",
                            remote : '邮箱已被注册！'
                        }
                    },

                    highlight : function(element) {
                        $(element).closest('.form-group').addClass('has-error');
                    },

                    success : function(label) {
                        label.closest('.form-group').removeClass('has-error');
                        label.remove();
                    },

                    errorPlacement : function(error, element) {
                        element.parent('div').append(error);
                    },

                    submitHandler : function(form) {
                        form.submit();
                    }
                });

                $('.form-horizontal input').keypress(function(e) {
                    if (e.which == 13) {
                        if ($('.form-horizontal').validate().form()) {
                            $('.form-horizontal').submit();
                        }
                        return false;
                    }
                });
            }
            return {
                init : function() {
                    handleSubmit();
                }
            };

        }();
        MyValidator.init();

        $(function () {
            $('#password').togglePassword({
                el: '#togglePassword'
            });
            $('#passwordRegister').togglePassword({
                el: '#togglePasswordRegister'
            });
        });
    </script>
</block>